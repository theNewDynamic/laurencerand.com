---
import Base from "../Base.astro";

import Marked from "@components/Marked.astro";
import { getImage } from "astro:assets";
import defaultImage from "../../content/default-image.jpeg";
const {
	entry,
	entry: { description, quote, attribution, image, footer_copy },
} = Astro.props;
import { render } from "astro:content";
const { Content, headings } = await render(entry);
const optimizedBackground = await getImage({ src: image || defaultImage });
---

<Base {entry}>
	<div
		slot="image"
		class="md:sticky top-0 w-full h-screen max-h-full bg-cover bg-center"
		style={{ backgroundImage: `url(${optimizedBackground.src})` }}
	>
	</div>
	{quote && <div class="text-3xl max-w-3xl mx-auto text-center px-8 md:px-16 pt-16">{quote}</div>}
	{
		attribution && (
			<div class="text-lg text-center pt-4 px-8 md:px-16 font-bold">â€” {attribution}</div>
		)
	}
	<div class="text-grey-darkest font-brand nested-no-underline p-4 lg:p-16">
		<div class="text-xl prose mx-auto">
			<Content />
			{
				footer_copy && (
					<div class="text-xm mt-4">
						<Marked text={footer_copy} />
					</div>
				)
			}
		</div>
	</div>
</Base>
